[{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/app.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/database/cache.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/database/config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/database/config/config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/database/connection.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/database/migrations/20240807121133-create-roles.js","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Sequelize' is defined but never used.","line":28,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":39}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use strict';\n\n/** @type {import('sequelize-cli').Migration} */\nmodule.exports = {\n  async up(queryInterface, Sequelize) {\n    await queryInterface.createTable('roles', {\n      id: {\n        type: Sequelize.INTEGER,\n        autoIncrement: true,\n        primaryKey: true,\n      },\n      name: {\n        type: Sequelize.STRING,\n        allowNull: false,\n        unique: true,\n      },\n      createdAt: {\n        type: Sequelize.DATE,\n        allowNull: false,\n      },\n      updatedAt: {\n        type: Sequelize.DATE,\n        allowNull: false,\n      },\n    });\n  },\n\n  async down(queryInterface, Sequelize) {\n    await queryInterface.dropTable('roles');\n  },\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/database/migrations/20240807123931-create-users.js","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Sequelize' is defined but never used.","line":46,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":39}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use strict';\n\n/** @type {import('sequelize-cli').Migration} */\nmodule.exports = {\n  async up(queryInterface, Sequelize) {\n    await queryInterface.createTable('users', {\n      id: {\n        type: Sequelize.INTEGER,\n        autoIncrement: true,\n        primaryKey: true,\n      },\n      email: {\n        type: Sequelize.STRING,\n        allowNull: false,\n        unique: true,\n      },\n      password: {\n        type: Sequelize.STRING,\n        allowNull: false,\n      },\n      tokens: {\n        type: Sequelize.FLOAT,\n        allowNull: false,\n        defaultValue: 0.0,\n      },\n      //need to be created before users\n      roleId: {\n        type: Sequelize.INTEGER,\n        allowNull: false,\n        references: {\n          model: 'roles',\n          key: 'id',\n        },\n      },\n      createdAt: {\n        type: Sequelize.DATE,\n        allowNull: false,\n      },\n      updatedAt: {\n        type: Sequelize.DATE,\n        allowNull: false,\n      },\n    });\n  },\n\n  async down(queryInterface, Sequelize) {\n    await queryInterface.dropTable('users');\n  },\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/database/models/dao.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/database/models/index.js","messages":[{"ruleId":"@typescript-eslint/no-var-requires","severity":2,"message":"Require statement not part of import statement.","line":3,"column":12,"nodeType":"CallExpression","messageId":"noVarReqs","endLine":3,"endColumn":25},{"ruleId":"@typescript-eslint/no-var-requires","severity":2,"message":"Require statement not part of import statement.","line":4,"column":14,"nodeType":"CallExpression","messageId":"noVarReqs","endLine":4,"endColumn":29},{"ruleId":"@typescript-eslint/no-var-requires","severity":2,"message":"Require statement not part of import statement.","line":5,"column":19,"nodeType":"CallExpression","messageId":"noVarReqs","endLine":5,"endColumn":39},{"ruleId":"@typescript-eslint/no-var-requires","severity":2,"message":"Require statement not part of import statement.","line":6,"column":17,"nodeType":"CallExpression","messageId":"noVarReqs","endLine":6,"endColumn":35},{"ruleId":"@typescript-eslint/no-var-requires","severity":2,"message":"Require statement not part of import statement.","line":9,"column":16,"nodeType":"CallExpression","messageId":"noVarReqs","endLine":9,"endColumn":61},{"ruleId":"@typescript-eslint/no-var-requires","severity":2,"message":"Require statement not part of import statement.","line":24,"column":19,"nodeType":"CallExpression","messageId":"noVarReqs","endLine":24,"endColumn":54}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use strict';\n\nconst fs = require('fs');\nconst path = require('path');\nconst Sequelize = require('sequelize');\nconst process = require('process');\nconst basename = path.basename(__filename);\nconst env = process.env.NODE_ENV || 'development';\nconst config = require(__dirname + '/../config/config.json')[env];\nconst db = {};\n\nlet sequelize;\nif (config.use_env_variable) {\n  sequelize = new Sequelize(process.env[config.use_env_variable], config);\n} else {\n  sequelize = new Sequelize(config.database, config.username, config.password, config);\n}\n\nfs.readdirSync(__dirname)\n  .filter((file) => {\n    return file.indexOf('.') !== 0 && file !== basename && file.slice(-3) === '.js' && file.indexOf('.test.js') === -1;\n  })\n  .forEach((file) => {\n    const model = require(path.join(__dirname, file))(sequelize, Sequelize.DataTypes);\n    db[model.name] = model;\n  });\n\nObject.keys(db).forEach((modelName) => {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  }\n});\n\ndb.sequelize = sequelize;\ndb.Sequelize = Sequelize;\n\nmodule.exports = db;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/database/models/role.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/database/models/sync.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Role' is defined but never used.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'User' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":14}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import sequelize from '../connection';\nimport { Role } from './role';\nimport { User } from './user';\n\n// Sincronizza tutti i modelli con il database\nsequelize\n  .sync({ force: false })\n  .then(() => {\n    console.log('Database & tables created!');\n  })\n  .catch((error) => {\n    console.error('Error creating database & tables:', error);\n  });\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/database/models/user.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/database/repository/role.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/database/repository/user.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'UserRank' is defined but never used.","line":10,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'password' is assigned a value but never used.","line":21,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":23}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { User } from '../models/user';\nimport { RoleRepository } from './role';\n\ninterface ICreateUser {\n  nickname: string;\n  email: string;\n  password: string;\n}\n\ninterface UserRank {\n  nickname: string;\n  coins: number;\n}\n\nconst roleRepository = new RoleRepository();\n\nclass UserRepository {\n  async createUser(data: ICreateUser): Promise<Partial<User>> {\n    try {\n      const user = await User.dao.save(data);\n      const { password, ...otherKeys } = user.dataValues;\n      return otherKeys as Partial<User>;\n    } catch (error) {\n      console.error(error);\n      throw new Error('Creazione user fallita');\n    }\n  }\n\n  async createAdmin(data: ICreateUser): Promise<User> {\n    // MANCA SERVICE REGISTER ADMIN\n    try {\n      const role = await roleRepository.getRoleByName('admin');\n\n      if (!role) {\n        throw new Error('Ruolo \"admin\" non trovato');\n      }\n\n      data.roleId = role.id;\n\n      const user = await User.dao.save(data);\n      console.log('Admin creato');\n      console.log(user);\n      return user as User;\n    } catch (error) {\n      console.error(error);\n      throw new Error('Creazione admin fallita');\n    }\n  }\n  async getUserById(id: number): Promise<User | null> {\n    try {\n      if (await this.userIdExist(id)) {\n        const user = await User.dao.get(id);\n        return user as User | null;\n      }\n    } catch (error) {\n      console.error(error);\n      throw new Error('Recupero utente per ID fallito');\n    }\n  }\n  async userIdExist(userId: number): Promise<boolean> {\n    // MANCA GESTIONE CACHE\n    const count = await User.count({ where: { id: userId } });\n    return count > 0;\n  }\n\n  async getUserByEmail(email: string): Promise<User | null> {\n    // MANCA GESTIONE CACHE\n    try {\n      const user = await User.findOne({ where: { email } });\n      return user as User | null;\n    } catch (error) {\n      console.error(error);\n      throw new Error('Recupero utente per email fallito');\n    }\n  }\n  async getUsers(): Promise<User[] | null> {\n    try {\n      const users = await User.dao.getAll();\n      return users as User[] | null;\n    } catch (error) {\n      console.error(error);\n      throw new Error('Recupero utenti fallito');\n    }\n  }\n  async updateUser(user: User, data: Partial<ICreateUser>): Promise<0 | 1> {\n    try {\n      console.log('Aggiornamento utente:', user);\n      return (await User.dao.update(user, data)) as 0 | 1;\n    } catch (error) {\n      console.error(error);\n      throw new Error('Aggiornamento utente fallito');\n    }\n  }\n  async deleteUser(user: User): Promise<0 | 1> {\n    try {\n      console.log('Eliminazione utente:', user);\n      return (await User.dao.delete(user)) as 0 | 1;\n    } catch (error) {\n      console.error(error);\n      throw new Error('Eliminazione utente fallita');\n    }\n  }\n}\n\nexport { UserRepository };\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/database/seeders/20240807124854-role_seed.js","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Sequelize' is defined but never used.","line":5,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Sequelize' is defined but never used.","line":20,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":39}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use strict';\n\n/** @type {import('sequelize-cli').Migration} */\nmodule.exports = {\n  async up(queryInterface, Sequelize) {\n    await queryInterface.bulkInsert('roles', [\n      {\n        name: 'Admin',\n        createdAt: new Date(),\n        updatedAt: new Date(),\n      },\n      {\n        name: 'User',\n        createdAt: new Date(),\n        updatedAt: new Date(),\n      },\n    ]);\n  },\n\n  async down(queryInterface, Sequelize) {\n    await queryInterface.bulkDelete('roles', null, {});\n  },\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/database/seeders/20240807124901-user_seed.js","messages":[{"ruleId":"@typescript-eslint/no-var-requires","severity":2,"message":"Require statement not part of import statement.","line":2,"column":16,"nodeType":"CallExpression","messageId":"noVarReqs","endLine":2,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Sequelize' is defined but never used.","line":5,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Sequelize' is defined but never used.","line":38,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":39}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use strict';\nconst bcrypt = require('bcrypt');\n/** @type {import('sequelize-cli').Migration} */\nmodule.exports = {\n  async up(queryInterface, Sequelize) {\n    const hashedPassword1 = await bcrypt.hash('password123', 10);\n    const hashedPassword2 = await bcrypt.hash('password456', 10);\n    const hashedPassword3 = await bcrypt.hash('password789', 10);\n\n    await queryInterface.bulkInsert('users', [\n      {\n        email: 'user1@example.com',\n        password: hashedPassword1,\n        tokens: 100,\n        roleId: 1,\n        createdAt: new Date(),\n        updatedAt: new Date(),\n      },\n      {\n        email: 'user2@example.com',\n        password: hashedPassword2,\n        tokens: 150,\n        roleId: 1,\n        createdAt: new Date(),\n        updatedAt: new Date(),\n      },\n      {\n        email: 'user3@example.com',\n        password: hashedPassword3,\n        tokens: 200,\n        roleId: 2,\n        createdAt: new Date(),\n        updatedAt: new Date(),\n      },\n    ]);\n  },\n\n  async down(queryInterface, Sequelize) {\n    await queryInterface.bulkDelete('users', null, {});\n  },\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/errors/AppError.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/errors/ErrorFactory.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/errors/HttpStatusCode.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/middlewares/_auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/middlewares/_authRSA.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/middlewares/errorHandler.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/middlewares/filterRequest.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/middlewares/jwtAuth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/middlewares/logger.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/middlewares/methods.ts","messages":[{"ruleId":"no-undef","severity":2,"message":"'ErrorFactory' is not defined.","line":16,"column":21,"nodeType":"Identifier","messageId":"undef","endLine":16,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'HttpStatusCode' is not defined.","line":19,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":19,"endColumn":34},{"ruleId":"no-undef","severity":2,"message":"'HttpStatusCode' is not defined.","line":21,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":21,"endColumn":34},{"ruleId":"no-undef","severity":2,"message":"'HttpStatusCode' is not defined.","line":27,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":27,"endColumn":34},{"ruleId":"no-undef","severity":2,"message":"'ISError' is not defined.","line":34,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":34,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'ISError' is not defined.","line":47,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":47,"endColumn":19}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Request, Response, NextFunction } from 'express';\n\nexport default (req: Request, res: Response, next: NextFunction) => {\n  req.validate = (validKeys: string[]) => {\n    const keys = Object.keys(req.body);\n\n    for (const key of keys) {\n      if (!validKeys.includes(key)) {\n        return res.build('BadRequest', `Invalid key in request body: ${key}`);\n      }\n    }\n  };\n\n  res.build = <T>(errorType: string, message: string, results?: T) => {\n    try {\n      const error = ErrorFactory.getError(errorType);\n      if (error) {\n        error.setDetails(message);\n        res.status(HttpStatusCode[errorType]).json(error);\n      } else if (errorType == 'OK' || errorType == 'Created') {\n        res.status(HttpStatusCode[errorType]).json({\n          success: true,\n          message: message,\n          results: results,\n        });\n      } else {\n        res.status(HttpStatusCode.InternalServerError).json({\n          success: false,\n          message: 'Unknown error type',\n          details: message,\n        });\n      }\n    } catch (err) {\n      next(ISError('Error building response', err));\n    }\n  };\n\n  res.sendFile = (fileBuffer, format: string) => {\n    try {\n      const contentType = format === 'pdf' ? 'application/pdf' : format === 'csv' ? 'text/csv' : 'application/json';\n      const fileExtension = format === 'pdf' ? 'pdf' : format === 'csv' ? 'csv' : 'json';\n\n      res.setHeader('Content-Disposition', `attachment; filename=export.${fileExtension}`);\n      res.setHeader('Content-Type', contentType);\n      res.send(fileBuffer);\n    } catch (err) {\n      next(ISError('Error sending file', err));\n    }\n  };\n  next();\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/routes/user.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/routesConfig.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/services/export.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/edoardo/ESAME_PROGETTO_PA2024/tictactoe3d/app/src/services/user.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]}]